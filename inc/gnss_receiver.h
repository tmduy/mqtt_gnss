/*
 * @author Duy Tran
 * @date 2024-09-30
*/

#ifndef __GNSS_RECEIVER_H__
#define __GNSS_RECEIVER_H__

/***********************************************************************************************************************
 * Includes
 **********************************************************************************************************************/
#include <iostream>
#include <string>
#include <mosquitto.h>
#include <sqlite3.h>
#include <csignal>
#include <atomic>
#include <iomanip>      // for std::put_time
#include <chrono>       // for system clock

/***********************************************************************************************************************
 * Macro definitions
 **********************************************************************************************************************/

/***********************************************************************************************************************
 * Typedef definitions
 **********************************************************************************************************************/

/**********************************************************************************************************************
 * Exported global variables
 **********************************************************************************************************************/

/***********************************************************************************************************************
 * Function declarations
 **********************************************************************************************************************/
sqlite3* initDatabase();
void on_message(struct mosquitto* mosq, void* userdata, const struct mosquitto_message* message);
void logGNSSData(const std::string& gnssData);
bool validateNMEAFormat(const std::string& gnssData);
void storeValidData(sqlite3* db, const std::string& gnssData);

#endif // __GNSS_RECEIVER_H__
